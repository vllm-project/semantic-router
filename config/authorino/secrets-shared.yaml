# Pattern N:1 — Shared provider tokens (many users → same provider keys)
#
# Multiple users each have a unique local token, but all map to the same
# shared provider keys (e.g., a team/org pool).
#
# Flow: Bob sends "Bearer sr-bob-team-token-1111"
#       Carol sends "Bearer sr-carol-team-token-2222"
#       → Both match their respective Secret
#       → Both get x-user-openai-key: sk-proj-shared-team-openai-key-TEAM
#       → ext_proc uses the shared team key for upstream requests
#
---
apiVersion: v1
kind: Secret
metadata:
  name: user-bob-shared
  labels:
    app: semantic-router
    authorino.kuadrant.io/managed-by: authorino
  annotations:
    openai-key: "sk-proj-shared-team-openai-key-TEAM"
    anthropic-key: "sk-ant-shared-team-anthropic-key-TEAM"
stringData:
  api_key: "sr-bob-team-token-1111"
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  name: user-carol-shared
  labels:
    app: semantic-router
    authorino.kuadrant.io/managed-by: authorino
  annotations:
    openai-key: "sk-proj-shared-team-openai-key-TEAM"
    anthropic-key: "sk-ant-shared-team-anthropic-key-TEAM"
stringData:
  api_key: "sr-carol-team-token-2222"
type: Opaque
