# Pattern 1:N — Admin-managed per-user tokens
#
# The admin allocates a local token to each user.
# The Secret's api_key is the local token; annotations hold distinct provider keys.
# Users never see the actual provider keys.
#
# Flow: Alice sends "Bearer sr-alice-local-token-7890"
#       → Authorino matches this Secret
#       → Injects x-user-openai-key: sk-proj-alice-dedicated-openai-key
#       → Injects x-user-anthropic-key: sk-ant-alice-dedicated-anthropic-key
#       → ext_proc uses the appropriate key for the chosen upstream provider
#
apiVersion: v1
kind: Secret
metadata:
  name: user-alice-per-user
  labels:
    app: semantic-router
    authorino.kuadrant.io/managed-by: authorino
  annotations:
    openai-key: "sk-proj-alice-dedicated-openai-key"
    anthropic-key: "sk-ant-alice-dedicated-anthropic-key"
stringData:
  api_key: "sr-alice-local-token-7890"   # admin-issued local token
type: Opaque
