# No BERT / embedding models needed for pure keyword classification

semantic_cache:
  enabled: false

tools:
  enabled: false

prompt_guard:
  enabled: false

# vLLM Endpoints Configuration
vllm_endpoints:
  - name: "endpoint1"
    address: "127.0.0.1"
    port: 8002
    weight: 1

model_config:
  "qwen3":
    reasoning_family: "qwen3"
    preferred_endpoints: ["endpoint1"]

# Keyword Rules Configuration
# Demonstrates all three methods: regex, bm25, ngram
keyword_rules:
  # ---------- BM25 Method ----------
  # Best for: topic detection with large keyword lists, natural TF-IDF scoring
  - name: "code_keywords"
    operator: "OR"
    method: "bm25"
    keywords:
      - "code"
      - "function"
      - "implement"
      - "debug"
      - "algorithm"
      - "compile"
      - "syntax"
      - "variable"
      - "loop"
      - "refactor"
    bm25_threshold: 0.1
    case_sensitive: false

  - name: "medical_keywords"
    operator: "OR"
    method: "bm25"
    keywords:
      - "diagnosis"
      - "treatment"
      - "symptoms"
      - "prescription"
      - "surgery"
      - "patient"
      - "medication"
      - "disease"
    bm25_threshold: 0.1
    case_sensitive: false

  # ---------- N-gram Method ----------
  # Best for: typo tolerance, fuzzy matching without explicit Levenshtein
  - name: "urgent_request"
    operator: "OR"
    method: "ngram"
    keywords:
      - "urgent"
      - "immediate"
      - "asap"
      - "emergency"
      - "critical"
    ngram_threshold: 0.4
    ngram_arity: 3
    case_sensitive: false

  - name: "sensitive_data"
    operator: "AND"
    method: "ngram"
    keywords:
      - "password"
      - "credentials"
    ngram_threshold: 0.5
    ngram_arity: 3
    case_sensitive: false

  # ---------- Regex Method (default) ----------
  # Best for: exact pattern matching, word boundary enforcement
  - name: "exclude_spam"
    operator: "NOR"
    method: "regex"
    keywords:
      - "buy now"
      - "free money"
      - "click here"
    case_sensitive: false

  - name: "exact_pattern"
    operator: "OR"
    method: "regex"
    keywords:
      - "user.name@domain.com"
      - "C:\\Program Files\\"
    case_sensitive: false

# Categories
categories:
  - name: code_keywords
    description: "Programming and software development"
  - name: medical_keywords
    description: "Medical and health-related queries"
  - name: urgent_request
    description: "Urgent and time-sensitive requests"
  - name: sensitive_data
    description: "Requests involving sensitive credentials"
  - name: exclude_spam
    description: "Non-spam content (NOR rule)"
  - name: exact_pattern
    description: "Exact pattern matches"
  - name: other
    description: "General queries"

strategy: "priority"

decisions:
  - name: "code_decision"
    description: "Code-related queries (BM25 classified)"
    priority: 150
    rules:
      operator: "AND"
      conditions:
        - type: "keyword"
          name: "code_keywords"
    modelRefs:
      - model: "qwen3"
        use_reasoning: true

  - name: "medical_decision"
    description: "Medical queries (BM25 classified)"
    priority: 150
    rules:
      operator: "AND"
      conditions:
        - type: "keyword"
          name: "medical_keywords"
    modelRefs:
      - model: "qwen3"
        use_reasoning: false

  - name: "urgent_decision"
    description: "Urgent requests (N-gram classified with typo tolerance)"
    priority: 200
    rules:
      operator: "AND"
      conditions:
        - type: "keyword"
          name: "urgent_request"
    modelRefs:
      - model: "qwen3"
        use_reasoning: false

  - name: "general_decision"
    description: "General queries"
    priority: 50
    rules:
      operator: "AND"
      conditions:
        - type: "domain"
          name: "other"
    modelRefs:
      - model: "qwen3"
        use_reasoning: false

default_model: qwen3
