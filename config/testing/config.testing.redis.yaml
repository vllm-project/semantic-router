bert_model:
  model_id: models/mom-embedding-light
  threshold: 0.6
  use_cpu: true

semantic_cache:
  enabled: true
  backend_type: "redis"
  similarity_threshold: 0.8
  ttl_seconds: 3600
  redis:
    connection:
      host: "redis"
      port: 6379
      database: 0
      password: ""
      timeout: 30
      tls:
        enabled: false
        cert_file: ""
        key_file: ""
        ca_file: ""
    index:
      name: "semantic_cache_idx"
      prefix: "doc:"
      vector_field:
        name: "embedding"
        dimension: 384
        metric_type: "COSINE"
      index_type: "HNSW"
      params:
        M: 16
        efConstruction: 64
    search:
      topk: 1
    logging:
      level: "info"
      enable_query_log: false
      enable_metrics: true
    development:
      drop_index_on_startup: true
      auto_create_index: true
      verbose_errors: true
  embedding_model: "bert"

tools:
  enabled: true
  top_k: 3
  similarity_threshold: 0.2
  tools_db_path: "config/tools_db.json"
  fallback_to_empty: true

prompt_guard:
  enabled: true
  use_modernbert: false
  model_id: "models/mom-jailbreak-classifier"
  threshold: 0.7
  use_cpu: true
  jailbreak_mapping_path: "models/mom-jailbreak-classifier/jailbreak_type_mapping.json"

vllm_endpoints:
  - name: "mock"
    address: "172.28.0.10"
    port: 8000
    weight: 1
    health_check_path: "/health"

model_config:
  "Model-A":
    preferred_endpoints: ["mock"]
  "Model-B":
    preferred_endpoints: ["mock"]
  "openai/gpt-oss-20b":
    reasoning_family: "gpt-oss"
    preferred_endpoints: ["mock"]

categories:
  - name: other
    description: "General knowledge and miscellaneous topics"
    mmlu_categories: ["other"]
  - name: decision_cache_test
    description: "Decision cache test keyword match"
    mmlu_categories: ["decision_cache_test"]
  - name: math
    description: "Mathematics and quantitative reasoning"
    mmlu_categories: ["math"]
  - name: computer science
    description: "Computer science and programming"
    mmlu_categories: ["computer_science"]
  - name: business
    description: "Business and management related queries"
    mmlu_categories: ["business"]
  - name: history
    description: "Historical questions and cultural topics"
    mmlu_categories: ["history"]

strategy: "priority"

keyword_rules:
  - name: "decision_cache_test"
    operator: "OR"
    keywords: ["water cycle"]
    case_sensitive: false
  - name: "math"
    operator: "OR"
    keywords: ["quadratic", "equation", "solve", "derivative", "integral"]
    case_sensitive: false
  - name: "computer science"
    operator: "OR"
    keywords: ["python", "linked list", "algorithm", "code", "program"]
    case_sensitive: false
  - name: "business"
    operator: "OR"
    keywords: ["business", "supply chain", "management", "strategy"]
    case_sensitive: false
  - name: "history"
    operator: "OR"
    keywords: ["world war", "history", "historic", "century"]
    case_sensitive: false

decisions:
  - name: "math_decision"
    description: "Math queries"
    priority: 100
    rules:
      operator: "AND"
      conditions:
        - type: "keyword"
          name: "math"
    modelRefs:
      - model: "Model-B"
        use_reasoning: false
  - name: "computer_science_decision"
    description: "Computer science queries"
    priority: 90
    rules:
      operator: "AND"
      conditions:
        - type: "keyword"
          name: "computer science"
    modelRefs:
      - model: "Model-B"
        use_reasoning: false
  - name: "business_decision"
    description: "Business queries"
    priority: 80
    rules:
      operator: "AND"
      conditions:
        - type: "keyword"
          name: "business"
    modelRefs:
      - model: "Model-A"
        use_reasoning: false
  - name: "history_decision"
    description: "History queries"
    priority: 70
    rules:
      operator: "AND"
      conditions:
        - type: "keyword"
          name: "history"
    modelRefs:
      - model: "Model-A"
        use_reasoning: false
  - name: "general_decision"
    description: "General knowledge and miscellaneous topics"
    priority: 10
    rules:
      operator: "AND"
      conditions:
        - type: "keyword"
          name: "decision_cache_test"
    modelRefs:
      - model: "Model-A"
        use_reasoning: false
    plugins:
      - type: "pii"
        configuration:
          enabled: true
          pii_types_allowed: []

default_model: Model-A

reasoning_families:
  deepseek:
    type: "chat_template_kwargs"
    parameter: "thinking"

  qwen3:
    type: "chat_template_kwargs"
    parameter: "enable_thinking"

  gpt-oss:
    type: "reasoning_effort"
    parameter: "reasoning_effort"
  gpt:
    type: "reasoning_effort"
    parameter: "reasoning_effort"

default_reasoning_effort: high

api:
  batch_classification:
    max_batch_size: 100
    concurrency_threshold: 5
    max_concurrency: 8
    metrics:
      enabled: true
      detailed_goroutine_tracking: true
      high_resolution_timing: false
      sample_rate: 1.0
      duration_buckets:
        [0.001, 0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1, 2.5, 5, 10, 30]
      size_buckets: [1, 2, 5, 10, 20, 50, 100, 200]
